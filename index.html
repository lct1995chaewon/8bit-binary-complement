<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>å…«ä½å…ƒäºŒè£œç¢¼äº’å‹•æ•™å­¸ï¼ˆæ­£ç¢ºåˆ†æ­¥ç‰ˆï¼‰</title>
<style>
body{
  font-family:"Noto Sans TC","Microsoft JhengHei",sans-serif;
  background:#f6f7f9;color:#222;text-align:center;margin:20px;
}
h1{color:#004a7f;}
#bitContainer{
  display:flex;justify-content:center;flex-wrap:wrap;
  gap:8px;margin:20px 0;
}
.bit{
  width:60px;height:70px;border-radius:6px;
  background:#eee;display:flex;align-items:center;justify-content:center;
  font-size:32px;font-weight:bold;cursor:pointer;
  border:2px solid #aaa;transition:background 0.2s;
}
.bit.on{background:#0074d9;color:#fff;border-color:#0074d9;}
button{
  margin:6px;padding:10px 20px;font-size:15px;border:none;
  border-radius:6px;background:#005a92;color:#fff;cursor:pointer;
}
button:hover{background:#0074d9;}
#info{
  margin-top:18px;font-size:18px;line-height:1.6;
}
.notice{
  color:#d00;font-weight:bold;
}
@media(max-width:600px){
  .bit{width:45px;height:55px;font-size:26px;}
}
</style>
</head>
<body>

<h1>å…«ä½å…ƒäºŒè£œç¢¼äº’å‹•æ•™å­¸ï¼ˆæ­£ç¢ºåˆ†æ­¥ç‰ˆï¼‰</h1>
<p>è«‹ä¾æ­¥é©Ÿé€²è¡Œï¼š1ï¸âƒ£â€¯å–å â†’â€¯2ï¸âƒ£â€¯åŠ â€¯1ã€‚<br>æœªå®Œæˆç¬¬â€¯1â€¯æ­¥ç„¡æ³•é€²è¡Œç¬¬â€¯2â€¯æ­¥ã€‚</p>

<div id="bitContainer"></div>

<div>
  <button id="invertBtn">ç¬¬â€¯1â€¯æ­¥ï¼šå–åâ€¯(Invert)</button>
  <button id="addOneBtn">ç¬¬â€¯2â€¯æ­¥ï¼šåŠ â€¯1â€¯(Addâ€¯1)</button>
  <button id="resetBtn">é‡è¨­</button>
</div>

<div id="info"></div>

<script>
const container=document.getElementById("bitContainer");
const info=document.getElementById("info");
let bits=[0,0,0,0,0,0,0,0];
let stage="normal"; // normal, inverted, final

function renderBits(){
  container.innerHTML="";
  bits.forEach((bit,idx)=>{
    const el=document.createElement("div");
    el.className="bit"+(bit===1?" on":"");
    el.textContent=bit;
    el.title="ä½å…ƒ "+idx;
    el.addEventListener("click",()=>{
      bits[idx]=bits[idx]===0?1:0;
      renderBits();updateInfo();
    });
    container.appendChild(el);
  });
}

function toDecimal(bits){
  const val=parseInt(bits.join(""),2);
  return (val>127)?(val-256):val;
}

function updateInfo(msg=""){
  let html="";
  if(stage==="normal"){
    html=`${msg}<br>ç›®å‰äºŒé€²åˆ¶ï¼š<b>${bits.join("")}</b><br>åé€²åˆ¶å€¼ï¼š<b>${toDecimal(bits)}</b>`;
  }else if(stage==="inverted"){
    html=`${msg}<br>ç›®å‰äºŒé€²åˆ¶ï¼š<b>${bits.join("")}</b><br><i>ï¼ˆé€™åªæ˜¯å–åçµæœï¼Œé‚„æœªåŠ â€¯1â€¯ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ç•¶ä½œè² æ•¸ï¼‰</i>`;
  }else if(stage==="final"){
    html=`${msg}<br>æœ€çµ‚äºŒé€²åˆ¶ï¼ˆäºŒè£œç¢¼ï¼‰ï¼š<b>${bits.join("")}</b><br>åé€²åˆ¶å€¼ï¼š<b>${toDecimal(bits)}</b>`;
  }
  info.innerHTML=html;
}

function invertAll(){
  bits=bits.map(b=>b^1);
  stage="inverted";
  renderBits();
  updateInfo("ç¬¬â€¯1â€¯æ­¥ï¼šå·²å–åæ‰€æœ‰ä½å…ƒã€‚");
}

function addOne(){
  // ğŸ›‘ é˜²å‘†ï¼šæœªå–åå‰ç¦æ­¢åŠ 1
  if(stage!=="inverted"){
    info.innerHTML=`<span class="notice">âš ï¸â€¯è«‹å…ˆå®Œæˆã€Œç¬¬â€¯1â€¯æ­¥ï¼šå–åã€ï¼</span><br>ç›®å‰ä¸èƒ½åŠ â€¯1ã€‚`;
    return;
  }
  let carry=1;
  for(let i=7;i>=0;i--){
    const sum=bits[i]+carry;
    bits[i]=sum%2;
    carry=Math.floor(sum/2);
  }
  stage="final";
  renderBits();
  updateInfo("ç¬¬â€¯2â€¯æ­¥ï¼šå·²åŠ â€¯1ï¼Œå®ŒæˆäºŒè£œç¢¼ã€‚");
}

document.getElementById("invertBtn").addEventListener("click",invertAll);
document.getElementById("addOneBtn").addEventListener("click",addOne);
document.getElementById("resetBtn").addEventListener("click",()=>{
  bits=[0,0,0,0,0,0,0,0];
  stage="normal";
  renderBits();
  updateInfo("å·²é‡è¨­ã€‚");
});

renderBits();updateInfo();
</script>

</body>
</html>
